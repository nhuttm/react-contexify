"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("react"),t=e(n),r=e(require("clsx")),i=require("react-dom");function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function c(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n.indexOf(t=o[r])>=0||(i[t]=e[t]);return i}function a(e){return"function"==typeof e}function u(e){return"string"==typeof e}function s(e,t){return n.Children.map(n.Children.toArray(e).filter(Boolean),(function(e){return n.cloneElement(e,t)}))}function l(e,n){return a(e)?e(n):e}var d=e(require("exenv")).canUseDOM,f=function(e){var t=e.children,r=e.mountNode,o=n.useState(!1),c=o[0],u=o[1],s=n.useRef();return n.useEffect((function(){var e;return d&&(e=document.body,s.current=document.createElement("div"),a(r)?e=r():r instanceof Element&&(e=r),e.appendChild(s.current),u(!0)),function(){d&&e.removeChild(s.current)}}),[r]),d&&c?i.createPortal(t,s.current):null},v=n.createContext({});function m(){return n.useContext(v)}var p=function(e){return t.createElement(v.Provider,{value:e.refTracker},e.children)};function g(){var e=new Map;return{on:function(n,t){var r;return e.has(n)?null==(r=e.get(n))||r.add(t):e.set(n,new Set([t])),this},off:function(n,t){return t?e.get(n).delete(t):e.delete(n),this},emit:function(n,t){if("production"!==process.env.NODE){var r=n;e.has(n)||0===r||console.error("It seems that the menu you are trying to display is not renderer or you have a menu id mismatch.","You used the menu id: "+n)}return e.has(n)&&e.get(n).forEach((function(e){e(t)})),this}}}var h=g();function b(){return n.useRef(new Map).current}var y={show:function(e){var n=e.id,t=e.event,r=e.props,i=e.position;t.preventDefault&&t.preventDefault(),h.emit(0).emit(n,{event:t.nativeEvent||t,props:r,position:i})},hideAll:function(){h.emit(0)}},w=function(){};function x(e,n){return a(n)?o({},e,n(e)):o({},e,n)}exports.Item=function(e){var n,i=e.children,o=e.className,a=e.style,u=e.triggerEvent,s=e.data,d=e.propsFromTrigger,f=e.onClick,v=void 0===f?w:f,p=e.disabled,g=void 0!==p&&p,h=e.hidden,b=void 0!==h&&h,y=c(e,["children","className","style","triggerEvent","data","propsFromTrigger","onClick","disabled","hidden"]),x=m(),E={data:s,triggerEvent:u,props:d},_=l(g,E);if(l(b,E))return null;var k=r("react-contexify__item",o,((n={})["react-contexify__item--disabled"]=_,n));return t.createElement("div",Object.assign({},y,{className:k,style:a,onClick:function(e){E.event=e,_?e.stopPropagation():v(E)},onKeyDown:function(e){"Enter"===e.key&&(E.event=e,v(E))},ref:function(e){e&&!_&&x.set(e,{node:e,isSubmenu:!1})},tabIndex:-1,role:"menuitem","aria-disabled":_}),t.createElement("div",{className:"react-contexify__item__content"},i))},exports.Menu=function(e){var i,a,l,d=e.id,v=e.theme,m=e.style,g=e.className,y=e.children,E=e.mountNode,_=e.animation,k=void 0===_?"scale":_,L=e.onHidden,N=void 0===L?w:L,T=e.onShown,S=void 0===T?w:T,R=c(e,["id","theme","style","className","children","mountNode","animation","onHidden","onShown"]),C=n.useReducer(x,{x:0,y:0,visible:!1,triggerEvent:{},propsFromTrigger:null,willLeave:!1}),A=C[0],O=C[1],D=n.useRef(null),F=n.useRef(!1),j=(a=A.visible,l=n.useRef(),n.useEffect((function(){l.current=a}),[a]),l.current),M=b(),P=n.useState((function(){return function(){var e,n,t,r,i=new Map,o=!1;function c(){r[e].node.focus()}function a(){return-1!==e||(u(),!1)}function u(){e+1<r.length?e++:e+1===r.length&&(e=0),o&&s(),c()}function s(){if(a()&&!t){var u=i.get(n),s=u.isRoot,l=u.items,d=u.focusedIndex,f=u.parentNode;n.classList.remove("react-contexify__submenu--is-open"),r=l,n=f,s&&(t=!0,i.clear()),o||(e=d,c())}}return{init:function(n){r=n,e=-1,t=!0},moveDown:u,moveUp:function(){-1===e||0===e?e=r.length-1:e-1<r.length&&e--,o&&s(),c()},openSubmenu:function(){if(a()&&e>=0&&r[e].isSubmenu){var u=Array.from(r[e].submenuRefTracker.values()),s=r[e].node;return i.set(s,{isRoot:t,focusedIndex:e,parentNode:n||s,items:r}),s.classList.add("react-contexify__submenu--is-open"),n=s,u.length>0?(e=0,r=u):o=!0,t=!1,c(),!0}return!1},closeSubmenu:s}}()}))[0];function I(e){var n=e.event,t=e.props,r=e.position;n.stopPropagation();var i,o,c=r||(o={x:0,y:0},function(e){return"touchend"===e.type}(i=n)&&i.changedTouches&&i.changedTouches.length>0?(o.x=i.changedTouches[0].clientX,o.y=i.changedTouches[0].clientY):(o.x=i.clientX,o.y=i.clientY),(!o.x||o.x<0)&&(o.x=0),(!o.y||o.y<0)&&(o.y=0),o),a=c.x,u=c.y;setTimeout((function(){O({visible:!0,willLeave:!1,x:a,y:u,triggerEvent:n,propsFromTrigger:t})}),0)}function H(e){(void 0===e||2!==e.button&&!0!==e.ctrlKey||"contextmenu"===e.type)&&(function(e){return!(!e||!(u(e)||"exit"in e&&e.exit))}(k)?O((function(e){return{willLeave:e.visible}})):O((function(e){return{visible:!e.visible&&e.visible}})))}n.useEffect((function(){return F.current=!0,h.on(d,I).on(0,H),function(){h.off(d,I).off(0,H)}}),[d]),n.useEffect((function(){F.current&&A.visible!==j&&(A.visible?S():N())}),[A.visible,N,S]),n.useEffect((function(){A.visible?P.init(Array.from(M.values())):M.clear()}),[A.visible,P,M]),n.useEffect((function(){if(A.visible){var e=window,n=e.innerWidth,t=e.innerHeight,r=D.current,i=r.offsetWidth,o=r.offsetHeight,c=A.x,a=A.y;c+i>n&&(c-=c+i-n),a+o>t&&(a-=a+o-t),O({x:c,y:a})}}),[A.visible]),n.useEffect((function(){function e(e){switch(e.preventDefault(),e.key){case"Enter":P.openSubmenu()||H();break;case"Escape":H();break;case"ArrowUp":P.moveUp();break;case"ArrowDown":P.moveDown();break;case"ArrowRight":P.openSubmenu();break;case"ArrowLeft":P.closeSubmenu()}}return A.visible&&(window.addEventListener("resize",H),window.addEventListener("contextmenu",H),window.addEventListener("click",H),window.addEventListener("scroll",H),window.addEventListener("keydown",e),window.addEventListener("blur",H)),function(){window.removeEventListener("resize",H),window.removeEventListener("contextmenu",H),window.removeEventListener("click",H),window.removeEventListener("scroll",H),window.removeEventListener("keydown",e),window.removeEventListener("blur",H)}}),[A.visible,P]);var q,U,W=A.visible,Y=A.triggerEvent,z=A.propsFromTrigger,B=A.x,K=A.y,X=A.willLeave,G=r("react-contexify",g,((i={})["react-contexify__theme--"+v]=v,i),k?u(k)?r(((q={})["react-contexify__will-enter--"+k]=k&&W&&!X,q["react-contexify__will-leave--"+k+" react-contexify__will-leave--'disabled'"]=k&&W&&X,q)):"enter"in k&&"exit"in k?r(((U={})["react-contexify__will-enter--"+k.enter]=k.enter&&W&&!X,U["react-contexify__will-leave--"+k.exit+" react-contexify__will-leave--'disabled'"]=k.exit&&W&&X,U)):null:null),J=o({},m,{left:B,top:K,opacity:1});return t.createElement(f,{mountNode:E},t.createElement(p,{refTracker:M},W&&t.createElement("div",Object.assign({},R,{className:G,onAnimationEnd:function(){A.willLeave&&A.visible&&O({visible:!1,willLeave:!1})},style:J,ref:D,role:"menu"}),s(y,{propsFromTrigger:z,triggerEvent:Y}))))},exports.Separator=function(){return t.createElement("div",{className:"react-contexify__separator"})},exports.Submenu=function(e){var i,a=e.arrow,u=void 0===a?"â–¶":a,d=e.children,f=e.disabled,v=void 0!==f&&f,g=e.hidden,h=void 0!==g&&g,y=e.label,w=e.className,x=e.triggerEvent,E=e.propsFromTrigger,_=e.style,k=c(e,["arrow","children","disabled","hidden","label","className","triggerEvent","propsFromTrigger","style"]),L=m(),N=b(),T=n.useRef(null),S=n.useState({left:"100%",top:0,bottom:"initial"}),R=S[0],C=S[1],A={triggerEvent:x,props:E},O=l(v,A),D=l(h,A);if(n.useEffect((function(){if(T.current){var e=window,n=e.innerWidth,t=e.innerHeight,r=T.current.getBoundingClientRect(),i={};r.right<n?(i.left="100%",i.right=void 0):(i.right="100%",i.left=void 0),r.bottom>t?(i.bottom=0,i.top="initial"):i.bottom="initial",C(i)}}),[]),D)return null;var F=r("react-contexify__item",w,((i={})["react-contexify__item--disabled"]=O,i)),j=o({},_,R);return t.createElement(p,{refTracker:N},t.createElement("div",Object.assign({},k,{className:F,ref:function(e){e&&!O&&L.set(e,{node:e,isSubmenu:!0,submenuRefTracker:N})},tabIndex:-1,role:"menuitem","aria-haspopup":!0,"aria-disabled":O}),t.createElement("div",{className:"react-contexify__item__content",onClick:function(e){e.stopPropagation()}},y,t.createElement("span",{className:"react-contexify__submenu-arrow"},u)),t.createElement("div",{className:"react-contexify react-contexify__submenu",ref:T,style:j},s(d,{propsFromTrigger:E,triggerEvent:x}))))},exports.animation={fade:"fade",flip:"flip",scale:"scale",slide:"slide"},exports.contextMenu=y,exports.theme={light:"light",dark:"dark"},exports.useContextMenu=function(e){return{show:function(n,t){y.show({id:(null==t?void 0:t.id)||(null==e?void 0:e.id),props:(null==t?void 0:t.props)||(null==e?void 0:e.props),event:n,position:null==t?void 0:t.position})},hideAll:function(){y.hideAll()}}};
//# sourceMappingURL=react-contexify.cjs.production.min.js.map
